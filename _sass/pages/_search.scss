/* stylelint-disable no-descending-specificity */
// ## Search Page Styles
// This file contains styles specific to the Search page of the website.
// The styles are designed to ensure a clean and user-friendly layout for the search functionality.
// SASS variables are used for spacing, colors, typography, and transitions to ensure consistency and easy updates.
// Referenced variables are defined in the settings folder for maintainability.

// NOTE: All SCSS variables in property values have been replaced with CSS custom properties (e.g., var(--color-primary)).
// For rgb() colors, use rgb(var(--color-primary-rgb), <alpha>) and define --color-primary-rgb at :root (e.g., 34, 139, 230 for #228be6).
// Example:
// :root {
//   --color-primary: #228be6;
//   --color-primary-rgb: 34, 139, 230;
//   --color-primary-dark: #1864ab;
//   --color-text-secondary: #6c757d;
//   --font-size-sm: 0.875rem;
//   --spacing-sm: 0.75rem;
// }
// @media (prefers-color-scheme: dark) {
//   :root {
//     --color-primary: #66aaff;
//     --color-primary-rgb: 102, 170, 255;
//     --color-primary-dark: #3388cc;
//     --color-text-secondary: #b0b8c1;
//   }
// }

// Move global button selectors and pseudo-classes to the very top for Stylelint specificity compliance
button {

  background: var(--color-primary);
  border: none;
  border-radius: var(--border-radius);
  color: var(--color-white);
  cursor: pointer;
  font-size: var(--font-size-md);
  margin-inline-start: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-md);
  transition: background-color var(--transition-duration-default) ease;
}

button:hover,
button:focus {

  background: var(--color-primary-dark);
}

// Search page container

.c-search-page {

  min-block-size: 60vh;
  padding: var(--spacing-lg) 0;
}

// Search box styles

.c-search-box {
  @media screen and (prefers-reduced-motion: reduce) {
    input[type='text'] {

      border: 1px solid var(--color-border-light); // Use light border color
      border-radius: var(--border-radius); // Apply rounded corners
      color: var(--color-text); // Use standard text color
      flex-grow: 1;
      font-size: var(--font-size-md); // Use medium font size for readability
      inline-size: 100%; // Set input width to 100% of the container
      max-inline-size: 500px; // Limit the maximum width of the input
      // ### Search Input Field
      // - **padding:** Adds inner spacing for better usability.
      // - **border:** Adds a light border for separation.
      // - **border-radius:** Applies rounded corners for a modern look.
      // - **width:** Sets the input width to 80% of the container.
      // - **max-width:** Limits the maximum width of the input for responsiveness.
      // - **font-size:** Uses a medium font size for readability.
      // - **color:** Uses the standard text color for consistency.
      padding: var(--spacing-sm) var(--spacing-md); // Add padding for better usability
      transition: none;

      &:focus {

        border-color: var(--color-primary);
        box-shadow: 0 0 0 3px rgb(var(--color-primary-rgb), 0.2);
        outline: none;
      }
    }
  }
  @media screen and (prefers-reduced-motion: reduce) {
    button {
      // ### Search Button
      // - **background:** Uses the primary color for the button.
      // - **color:** Uses white text for contrast.
      // - **border:** Removes the default border for a clean look.
      // - **padding:** Adds inner spacing for better usability.
      // - **margin-left:** Adds spacing to the left of the button.
      // - **border-radius:** Applies rounded corners for a modern look.
      // - **font-size:** Uses a medium font size for readability.
      // - **cursor:** Changes the cursor to a pointer for interactivity.
      // - **transition:** Adds smooth hover effects for background color changes.
      background: var(--color-primary); // Use primary color for the button
      border: none; // Remove default border
      border-radius: var(--border-radius); // Apply rounded corners
      color: var(--color-white); // Use white text for contrast
      cursor: pointer; // Pointer cursor for interactivity
      font-size: var(--font-size-md); // Use medium font size for the button
      margin-inline-start: var(--spacing-sm); // Add left margin for spacing
      padding: var(--spacing-sm) var(--spacing-md); // Add padding for clickable area
      transition: none; // Smooth hover transition

      &:hover, &:focus {
        // ### Hover Effect for Search Button
        // - **background:** Changes to a darker primary color for interactivity.
        background: var(--color-primary-dark); // Use darker primary color
      }
    }
  }

  // ### Search Box Container
  // - **margin-top:** Adds spacing above the search box.
  // - **text-align:** Centers the content horizontally.
  margin-block-end: var(--spacing-lg); // Add bottom margin using the spacing variable
  text-align: center; // Center-align the content
  button {
    // ### Search Button
    // - **background:** Uses the primary color for the button.
    // - **color:** Uses white text for contrast.
    // - **border:** Removes the default border for a clean look.
    // - **padding:** Adds inner spacing for better usability.
    // - **margin-left:** Adds spacing to the left of the button.
    // - **border-radius:** Applies rounded corners for a modern look.
    // - **font-size:** Uses a medium font size for readability.
    // - **cursor:** Changes the cursor to a pointer for interactivity.
    // - **transition:** Adds smooth hover effects for background color changes.
    background: var(--color-primary); // Use primary color for the button
    border: none; // Remove default border
    border-radius: var(--border-radius); // Apply rounded corners
    color: var(--color-white); // Use white text for contrast
    cursor: pointer; // Pointer cursor for interactivity
    font-size: var(--font-size-md); // Use medium font size for the button
    margin-inline-start: var(--spacing-sm); // Add left margin for spacing
    padding: var(--spacing-sm) var(--spacing-md); // Add padding for clickable area
    transition: background-color var(--transition-duration-default) ease; // Smooth hover transition

    &:hover, &:focus {
      // ### Hover Effect for Search Button
      // - **background:** Changes to a darker primary color for interactivity.
      background: var(--color-primary-dark); // Use darker primary color
    }
  }

  h2 {
    // ### Search Heading
    // - **font-size:** Uses a large font size for prominence.
    // - **margin-bottom:** Adds spacing below the heading for separation.
    font-size: var(--font-size-lg); // Use large font size for the heading
    margin-block-end: var(--spacing-md); // Add bottom margin using the spacing variable
  }

  .c-search-form {
    // ### Search Form
    // - **display:** Centers the form inline for alignment.
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-sm);
    justify-content: center;
    margin: 0 auto;
    max-inline-size: 600px;
  }

  input[type='text'] {

    border: 1px solid var(--color-border-light); // Use light border color
    border-radius: var(--border-radius); // Apply rounded corners
    color: var(--color-text); // Use standard text color
    flex-grow: 1;
    font-size: var(--font-size-md); // Use medium font size for readability
    inline-size: 100%; // Set input width to 100% of the container
    max-inline-size: 500px; // Limit the maximum width of the input
    // ### Search Input Field
    // - **padding:** Adds inner spacing for better usability.
    // - **border:** Adds a light border for separation.
    // - **border-radius:** Applies rounded corners for a modern look.
    // - **width:** Sets the input width to 80% of the container.
    // - **max-width:** Limits the maximum width of the input for responsiveness.
    // - **font-size:** Uses a medium font size for readability.
    // - **color:** Uses the standard text color for consistency.
    padding: var(--spacing-sm) var(--spacing-md); // Add padding for better usability
    transition: border-color var(--transition-duration-default) ease, box-shadow var(--transition-duration-default) ease;

    &:focus {

      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px rgb(var(--color-primary-rgb), 0.2);
      outline: none;
    }
  }
}

// Search filters

.c-search-filters {

  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  margin-block-start: var(--spacing-md);
  
  fieldset {

    border: none;
    margin: 0;
    padding: 0;
    
    legend {

      color: var(--color-text-secondary);
      font-size: var(--font-size-sm);
      font-weight: var(--font-weight-bold);
      inline-size: 100%;
      margin-block-end: var(--spacing-sm);
      text-align: center;
    }
  }
  
  &__options {

    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-md);
    justify-content: center;
  }
}

@media screen and (prefers-reduced-motion: reduce) {
  .c-search-filter-label {

    align-items: center;
    border-radius: var(--border-radius);
    cursor: pointer;
    display: flex;
    font-size: var(--font-size-sm);
    gap: var(--spacing-xs);
    padding: var(--spacing-xs) var(--spacing-sm);
    transition: none;
  
    &:hover, &:focus {

      background-color: rgb(var(--color-primary-rgb), 0.1);
    }
  
    input[type='checkbox'] {

      block-size: 16px;
      cursor: pointer;
      inline-size: 16px;
      margin: 0;
    }
  
    &.is-active {

      background-color: rgb(var(--color-primary-rgb), 0.15);
      border: 1px solid var(--color-primary);
      font-weight: var(--font-weight-semibold);
    }
  }
}

.c-search-filter-label {

  align-items: center;
  border-radius: var(--border-radius);
  cursor: pointer;
  display: flex;
  font-size: var(--font-size-sm);
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) var(--spacing-sm);
  transition: all var(--transition-duration-default) ease;
  
  input[type='checkbox'] {

    block-size: 16px;
    cursor: pointer;
    inline-size: 16px;
    margin: 0;
  }
}

// Search controls container

.c-search-controls {
  
  @include respond-to('md') {

    align-items: flex-start;
    flex-direction: row;
    justify-content: center;
  }
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  margin-block-start: var(--spacing-md);
}

// Search sort

.c-search-sort {

  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  
  fieldset {

    border: none;
    margin: 0;
    padding: 0;
    
    legend {

      color: var(--color-text-secondary);
      font-size: var(--font-size-sm);
      font-weight: var(--font-weight-bold);
      inline-size: 100%;
      margin-block-end: var(--spacing-sm);
      text-align: center;
    }
  }
  
  &__options {
    
    @include respond-to('sm') {

      flex-direction: row;
      gap: var(--spacing-md);
    }
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
  }
}

@media screen and (prefers-reduced-motion: reduce) {
  .c-search-sort-label {

    align-items: center;
    border-radius: var(--border-radius);
    cursor: pointer;
    display: flex;
    font-size: var(--font-size-sm);
    gap: var(--spacing-xs);
    padding: var(--spacing-xs) var(--spacing-sm);
    transition: none;
  
    &:hover, &:focus {

      background-color: rgb(var(--color-primary-rgb), 0.1);
    }
  
    &.is-active {

      background-color: rgb(var(--color-primary-rgb), 0.15);
      border: 1px solid var(--color-primary);
      font-weight: var(--font-weight-semibold);
    }
  }
}

.c-search-sort-label {

  align-items: center;
  border-radius: var(--border-radius);
  cursor: pointer;
  display: flex;
  font-size: var(--font-size-sm);
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) var(--spacing-sm);
  transition: all var(--transition-duration-default) ease;
  
  &.is-active {

    font-weight: var(--font-weight-semibold);
  }
}

// Search status

.c-search-status {

  font-size: var(--font-size-sm);
  margin-block-start: var(--spacing-md);
  
  &.is-error {

    color: var(--color-error);
  }
}

// Search results container

.c-search-results {
  @media screen and (prefers-reduced-motion: reduce) {
    &__item {

      border-block-end: 1px solid var(--color-border-light);
      padding: var(--spacing-md);
      transition: none;
    
      &:hover, &:focus {

        background-color: rgb(var(--color-primary-rgb), 0.05);
      }
    
      article {

        display: grid;
        gap: var(--spacing-xs);
      }
    }
  }
  margin-block-start: var(--spacing-lg);
  
  &__list {

    list-style: none;
    margin: 0;
    padding: 0;
  }
  
  &__item {

    padding: var(--spacing-md);
    transition: background-color var(--transition-duration-default) ease;
    
    article {

      display: grid;
      gap: var(--spacing-xs);
    }
  }
  
  &__title {

    font-size: var(--font-size-md);
    margin: 0 0 var(--spacing-xs);
    
    a {

      color: var(--color-primary);
      text-decoration: none;
      
      &:hover, &:focus {

        text-decoration: underline;
      }
    }
  }
  
  &__category {

    border-radius: 12px;
    display: inline-block;
    font-size: var(--font-size-sm);
    margin-inline-end: var(--spacing-sm);
    padding: 2px 8px;
  }
  
  &__date {

    font-size: var(--font-size-sm);
  }
  
  &__snippet {

    font-size: var(--font-size-sm);
    line-height: 1.6;
    margin: var(--spacing-sm) 0 0;
  }
  
  &__no-result {

    border-radius: var(--border-radius);
    font-size: var(--font-size-md);
    padding: var(--spacing-lg);
    text-align: center;
  }
}

.c-search-results-container {

  margin-block-start: var(--spacing-md);
}

// Search instructions section

.c-search-instructions {

  border-radius: var(--border-radius);
  display: flex;
  justify-content: center;
  margin-block-start: var(--spacing-lg);
  padding: var(--spacing-md);
  
  h3 {

    font-size: var(--font-size-md);
    margin-block: 0 var(--spacing-sm);
  }
  
  ul {

    list-style: disc;
    margin: 0;
    padding-inline-start: var(--spacing-lg);
    
    li {

      margin-block-end: var(--spacing-xs);
    }
  }

  .c-tech-card {

    inline-size: 100%;
    max-inline-size: 400px;
  }
}

// Highlight matches

.u-mark {

  border-radius: 2px;
  color: inherit;
  padding: 0 2px;
}

// Keyboard navigation focus style

.u-keyboard-focus {

  background-color: rgb(var(--color-primary-rgb), 0.05);
  border-radius: var(--border-radius);
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
  padding: 2px;
  position: relative;
  text-decoration: underline;
  
  &::before {

    border-radius: var(--border-radius);
    box-shadow: 0 0 0 2px rgb(var(--color-primary-rgb), 0.4);
    content: '';
    inset: -4px;
    pointer-events: none;
    position: absolute;
  }
}

// Search icon style in navigation

.c-search-icon {

  margin-inline-end: 5px;
  vertical-align: text-bottom;
}

// Hidden class for elements that start hidden

.u-hidden {

  display: none;
}

.u-visible {

  display: inline-block;
}

// Search statistics

.c-search-stats {

  border-radius: var(--border-radius);
  display: flex;
  justify-content: center;
  margin-block-start: var(--spacing-lg);
  padding: var(--spacing-md);
  
  h3 {

    color: var(--color-primary);
    font-size: var(--font-size-md);
    margin-block: 0 var(--spacing-sm);
  }
  
  &__content {

    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    
    p {

      font-size: var(--font-size-sm);
      margin: 0;
      
      span {

        font-weight: var(--font-weight-semibold);
      }
    }
    
    button {

      align-self: flex-start;
      margin-block-start: var(--spacing-sm);
    }
  }

  &.is-hidden {

    display: none;
  }

  .c-tech-card {

    inline-size: 100%;
    max-inline-size: 300px;
  }
}

// Responsive overrides for small screens

@include respond-to('sm') {

  .c-search-box {

    .c-search-overlay__input-group {

      align-items: stretch;
      flex-direction: column;

      select, .c-search-overlay__input, .c-search-overlay__mic, .c-search-overlay__submit {

        inline-size: 100%;
        margin: 0 0 var(--spacing-sm);
      }
    }
  }

  .c-search-filters {

    flex-direction: column;

    &__options {

      flex-direction: column;
      gap: var(--spacing-sm);
    }
  }

  .c-search-results-container {

    margin-block-start: var(--spacing-sm);

    .c-search-results__list {

      display: flex;
      flex-direction: column;
    }
  }

  .c-search-stats,
  .c-search-instructions {

    .c-tech-card {

      max-inline-size: 100%;
    }
  }
}

// Remove duplicate global button selectors below; keep only the topmost one for Stylelint compliance

@media (prefers-color-scheme: light) {
  .c-search-box input[type='text'] {

    background: var(--color-input-bg, #fff);
    border: 1px solid var(--color-border-light);
    border-radius: var(--border-radius);
    color: var(--color-text);
    &::placeholder {

      color: var(--color-text-secondary);
    }
    &:focus {

      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px rgb(var(--color-primary-rgb), 0.2);
    }
  }
  legend {

    color: var(--color-text-secondary);
  }
  .c-search-filter-label, .c-search-sort-label {

    background: none;
    color: var(--color-text);
    &:hover, &:focus {

      background-color: rgb(var(--color-primary-rgb), 0.1);
    }
    &.is-active {

      background-color: rgb(var(--color-primary-rgb), 0.15);
      border: 1px solid var(--color-primary);
      font-weight: var(--font-weight-semibold);
    }
  }
  .c-search-status {

    color: var(--color-text-secondary);
    &.is-error {

      color: var(--color-error);
    }
  }
  .c-search-results__item {

    background: none;
    border-block-end: 1px solid var(--color-border-light);
    &:hover, &:focus {

      background-color: rgb(var(--color-primary-rgb), 0.05);
    }
  }
  .c-search-results__title a {

    color: var(--color-primary);
    &:hover, &:focus {

      text-decoration: underline;
    }
  }
  .c-search-results__category {

    background-color: rgb(var(--color-primary-rgb), 0.1);
    color: var(--color-text-secondary);
  }
  .c-search-results__date {

    color: var(--color-text-secondary);
  }
  .c-search-results__snippet {

    color: var(--color-text);
  }
  .c-search-results__no-result {

    background-color: rgb(var(--color-border-light-rgb), 0.3);
    color: var(--color-text-secondary);
  }
  .c-search-instructions {

    background-color: rgb(var(--color-primary-rgb), 0.05);
    h3 {

      color: var(--color-primary);
    }
  }
  .u-mark {

    background-color: rgb(var(--color-primary-rgb), 0.2);
  }
  .u-keyboard-focus {

    background-color: rgb(var(--color-primary-rgb), 0.05);
    outline: 2px solid var(--color-primary);
    &::before {

      box-shadow: 0 0 0 2px rgb(var(--color-primary-rgb), 0.4);
    }
  }
  .c-search-stats {

    background-color: rgb(var(--color-primary-rgb), 0.05);
    h3 {

      color: var(--color-primary);
    }
  }
}

@media (prefers-color-scheme: dark) {
  .c-search-box input[type='text'] {

    background: var(--color-input-bg, #181a1b);
    border: 1px solid var(--color-border-light);
    border-radius: var(--border-radius);
    color: var(--color-text);
    &::placeholder {

      color: var(--color-text-secondary);
    }
    &:focus {

      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px rgb(var(--color-primary-rgb), 0.2);
    }
  }
  legend {

    color: var(--color-text-secondary);
  }
  .c-search-filter-label, .c-search-sort-label {

    background: none;
    color: var(--color-text);
    &:hover, &:focus {

      background-color: rgb(var(--color-primary-rgb), 0.1);
    }
    &.is-active {

      background-color: rgb(var(--color-primary-rgb), 0.15);
      border: 1px solid var(--color-primary);
      font-weight: var(--font-weight-semibold);
    }
  }
  .c-search-status {

    color: var(--color-text-secondary);
    &.is-error {

      color: var(--color-error);
    }
  }
  .c-search-results__item {

    background: none;
    border-block-end: 1px solid var(--color-border-light);
    &:hover, &:focus {

      background-color: rgb(var(--color-primary-rgb), 0.05);
    }
  }
  .c-search-results__title a {

    color: var(--color-primary);
    &:hover, &:focus {

      text-decoration: underline;
    }
  }
  .c-search-results__category {

    background-color: rgb(var(--color-primary-rgb), 0.1);
    color: var(--color-text-secondary);
  }
  .c-search-results__date {

    color: var(--color-text-secondary);
  }
  .c-search-results__snippet {

    color: var(--color-text);
  }
  .c-search-results__no-result {

    background-color: rgb(var(--color-border-light-rgb), 0.3);
    color: var(--color-text-secondary);
  }
  .c-search-instructions {

    background-color: rgb(var(--color-primary-rgb), 0.05);
    h3 {

      color: var(--color-primary);
    }
  }
  .u-mark {

    background-color: rgb(var(--color-primary-rgb), 0.2);
  }
  .u-keyboard-focus {

    background-color: rgb(var(--color-primary-rgb), 0.05);
    outline: 2px solid var(--color-primary);
    &::before {

      box-shadow: 0 0 0 2px rgb(var(--color-primary-rgb), 0.4);
    }
  }
  .c-search-stats {

    background-color: rgb(var(--color-primary-rgb), 0.05);
    h3 {

      color: var(--color-primary);
    }
  }
}